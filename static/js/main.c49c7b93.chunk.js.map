{"version":3,"sources":["components/map-controls/map-controls.module.css","components/layout/header.module.css","components/layout/footer.module.css","components/layout/layout.module.css","components/map-layer/map-layer.module.css","hooks/useLocalStorage.js","components/layout/header.js","components/layout/footer.js","components/layout/layout.js","components/map-layer/map-layer.js","components/map-container/map-container.js","components/map-controls/map-controls.js","components/map-loader/map-loader.js","App.js","index.js"],"names":["module","exports","useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","Header","className","styles","header","headerWrapper","href","process","logo","src","alt","logoImage","width","height","Footer","footerCopy","creator","target","rel","attribution","Layout","children","layout","layoutContent","MapLayer","features","popup","setPopup","type","paint","map","feature","coordinates","geometry","properties","onClick","e","originalEvent","preventDefault","openPopup","id","place","mag","url","popupClose","defaultPrevented","removePopup","Map","ReactMapboxGl","minZoom","maxZoom","accessToken","MapContainer","mapConfig","zoom","center","style","containerStyle","MapControls","active","changeTimespan","button","MapLoader","App","timespanText","isLoading","setIsLoading","setError","timespan","setTimespan","countEarthquakes","setCountEarthquakes","setFeatures","useEffect","fetch","then","response","json","data","metadata","status","count","catch","marginBottom","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yFACAA,EAAOC,QAAU,CAAC,OAAS,6BAA6B,OAAS,+B,iBCAjED,EAAOC,QAAU,CAAC,OAAS,uBAAuB,cAAgB,8BAA8B,KAAO,qBAAqB,UAAY,4B,kBCAxID,EAAOC,QAAU,CAAC,WAAa,2BAA2B,QAAU,wBAAwB,YAAc,8B,kBCA1GD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,cAAgB,gC,kBCAlED,EAAOC,QAAU,CAAC,MAAQ,yBAAyB,WAAa,gC,sJCqCjDC,MApCf,SAAyBC,EAAKC,GAAc,MAGJC,oBAAS,WAC7C,IAEE,IAAMC,EAAOC,OAAOC,aAAaC,QAAQN,GAEzC,OAAOG,EAAOI,KAAKC,MAAML,GAAQF,EACjC,MAAOQ,GAGP,OADAC,QAAQC,IAAIF,GACLR,MAZ+B,mBAGnCW,EAHmC,KAGtBC,EAHsB,KAiC1C,MAAO,CAACD,EAfS,SAACE,GAChB,IAEE,IAAMC,EACJD,aAAiBE,SAAWF,EAAMF,GAAeE,EAEnDD,EAAeE,GAEfX,OAAOC,aAAaY,QAAQjB,EAAKO,KAAKW,UAAUH,IAChD,MAAON,GAEPC,QAAQC,IAAIF,O,uBCRHU,EArBA,WACb,OACE,wBAAQC,UAAWC,IAAOC,OAA1B,SACE,qBAAKF,UAAU,YAAf,SACE,qBAAKA,UAAWC,IAAOE,cAAvB,SACE,oBAAGC,KAAMC,YAAwBL,UAAWC,IAAOK,KAAnD,UACE,qBACEC,IAAG,UAAKF,YAAL,oBACHG,IAAI,GACJR,UAAWC,IAAOQ,UAClBC,MAAM,KACNC,OAAO,OAET,sBAAMX,UAAU,eAAhB,gC,gBCwBGY,EArCA,WACb,OACE,iCACE,sBAAKZ,UAAS,UAAKC,IAAOY,WAAZ,cAAd,UACE,oBAAGb,UAAWC,IAAOa,QAArB,2BACiB,IACf,mBACEV,KAAK,sCACLW,OAAO,SACPC,IAAI,sBAHN,sCAQF,oBAAGhB,UAAWC,IAAOgB,YAArB,0BACgB,IACd,mBACEb,KAAK,0BACLW,OAAO,SACPC,IAAI,sBAHN,qBAMK,IARP,OASO,IACL,mBACEZ,KAAK,4BACLW,OAAO,SACPC,IAAI,sBAHN,uC,iBCXKE,EAVA,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAChB,OACE,sBAAKnB,UAAWC,IAAOmB,OAAvB,UACE,cAAC,EAAD,IACA,sBAAMpB,UAAWC,IAAOoB,cAAxB,SAAwCF,IACxC,cAAC,EAAD,Q,wBC0FSG,EA/FE,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EACPzC,oBAAS,GADF,mBAC1B0C,EAD0B,KACnBC,EADmB,KAmDjC,OACE,qCACE,cAAC,IAAD,CAAOC,KAAK,SAASC,MArCG,CAC1B,eAAgB,CACd,cACA,CAAC,UACD,CAAC,IAAK,CAAC,MAAO,OAAQ,KACtB,IACA,UACA,IACA,UACA,IACA,UACA,IACA,UACA,IACA,UACA,IACA,UACA,IACA,UACA,IACA,WAEF,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,QACD,EACA,CAAC,IAAK,CAAC,OAAQ,CAAC,MAAO,QAAS,KAChC,EACA,CAAC,IAAK,CAAC,OAAQ,CAAC,MAAO,QAAS,GAChC,EACA,IAMA,SACGJ,EAASK,KAAI,SAACC,GACb,OACE,cAAC,IAAD,CAEEC,YAAaD,EAAQE,SAASD,YAC9BE,WAAYH,EAAQG,WACpBC,QAAS,SAACC,GAAD,OAzDH,SAACL,EAASK,GAC1BA,EAAEC,cAAcC,iBAChBX,EAASI,GAuDiBQ,CAAUR,EAASK,KAH9BL,EAAQS,SAQpBd,GACC,eAAC,IAAD,CAEEM,YAAaN,EAAMO,SAASD,YAC5B9B,UAAWC,IAAOuB,MAHpB,UAKE,8BAAMA,EAAMQ,WAAWO,QACvB,8CAAiBf,EAAMQ,WAAWQ,OAClC,8BACE,mBACEpC,KAAMoB,EAAMQ,WAAWS,IACvB1B,OAAO,SACPC,IAAI,sBAHN,yBAQF,wBACEU,KAAK,SACL1B,UAAS,UAAKC,IAAOyC,WAAZ,WACTT,QAAS,SAACC,GAAD,OA7EC,SAACA,GAAO,IAAD,GACrB,OAACA,QAAD,IAACA,GAAD,UAACA,EAAGC,qBAAJ,aAAC,EAAkBQ,mBACrBlB,GAAS,GA2EamB,CAAYV,IAH9B,SAKE,sBAAMlC,UAAU,kBAAhB,6BArBJ,eACewB,EAAMc,SClEvBO,G,YAAMC,YAAc,CACxBC,QAAS,EACTC,QAAS,GACTC,YACE,+FA4BWC,EAzBM,SAAC,GAAkB,IAAhB3B,EAAe,EAAfA,SAChB4B,EAAY,CAChBC,KAAM,CAAC,GACPC,OAAQ,CAAC,UAAW,YAGtB,OACE,qBAAKrD,UAAU,MAAf,SACE,eAAC6C,EAAD,CACES,MAAK,oDACLF,KAAMD,EAAUC,KAChBC,OAAQF,EAAUE,OAClBE,eAAgB,CACd5C,OAAQ,OACRD,MAAO,QANX,UASE,cAAC,IAAD,IACA,cAAC,IAAD,IACA,cAAC,EAAD,CAAUa,SAAUA,U,gBCabiC,EA3CK,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,eAC7B,OACE,sBAAK1D,UAAU,cAAf,UACE,wBACE0B,KAAK,SACL1B,UAAS,UAAKC,IAAO0D,OAAZ,gBACI,aAAXF,EAAwBxD,IAAOwD,OAAS,IAE1CxB,QAAS,kBAAMyB,EAAe,aALhC,uBASA,wBACEhC,KAAK,SACL1B,UAAS,UAAKC,IAAO0D,OAAZ,gBACI,YAAXF,EAAuBxD,IAAOwD,OAAS,IAEzCxB,QAAS,kBAAMyB,EAAe,YALhC,sBASA,wBACEhC,KAAK,SACL1B,UAAS,UAAKC,IAAO0D,OAAZ,gBACI,aAAXF,EAAwBxD,IAAOwD,OAAS,IAE1CxB,QAAS,kBAAMyB,EAAe,aALhC,uBASA,wBACEhC,KAAK,SACL1B,UAAS,UAAKC,IAAO0D,OAAZ,gBACI,cAAXF,EAAyBxD,IAAOwD,OAAS,IAE3CxB,QAAS,kBAAMyB,EAAe,cALhC,4BCRSE,G,MArBG,WAChB,OACE,qBAAK5D,UAAU,YAAf,SACE,sBAAKA,UAAU,cAAf,UACE,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,+BCkEO6D,EA3EH,WAAO,IAuCbC,EAvCY,EACkBhF,oBAAS,GAD3B,mBACTiF,EADS,KACEC,EADF,OAEUlF,oBAAS,GAFnB,mBAETO,EAFS,KAEF4E,EAFE,OAGgBtF,EAAgB,WAAY,YAH5C,mBAGTuF,EAHS,KAGCC,EAHD,OAIgCrF,mBAAS,GAJzC,mBAITsF,EAJS,KAISC,EAJT,OAKgBvF,mBAAS,IALzB,mBAKTyC,EALS,KAKC+C,EALD,KA4BhB,GArBAC,qBAAU,WACRP,GAAa,GACb,IAAMvB,EAAG,oEAAgEyB,EAAhE,YACTM,MAAM/B,GACHgC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACG,GACLZ,GAAa,GACgB,MAAzBY,EAAKC,SAASC,QAKlBR,EAAYM,EAAKrD,UACjB8C,EAAoBO,EAAKC,SAASE,QALhCd,GAAS,MAOZe,OAAM,SAAC9C,GACN+B,GAAS,GACTD,GAAa,QAEhB,CAACE,IAEA7E,EACF,OACE,eAAC,EAAD,WACE,sEACA,wCACS,mBAAGe,KAAMC,YAAT,uBADT,UAQN,OAAQ6D,GACN,IAAK,UACHJ,EAAe,WACf,MACF,IAAK,WACHA,EAAe,SACf,MACF,IAAK,YACHA,EAAe,UACf,MACF,QACEA,EAAe,OAInB,OACE,cAAC,EAAD,UACE,sBAAK9D,UAAU,YAAf,UACG+D,EACC,cAAC,EAAD,IAEA,qCACE,oBAAGT,MAAO,CAAE2B,aAAc,UAA1B,UACGb,EAAmB,EAAIA,EAAmB,KAD7C,4BAEYN,KAEZ,cAAC,EAAD,CAAcvC,SAAUA,OAG5B,cAAC,EAAD,CAAakC,OAAQS,EAAUR,eAAgBS,UCzEvDe,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.c49c7b93.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"map-controls_button__1GkPL\",\"active\":\"map-controls_active__nKchH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__3W_Vl\",\"headerWrapper\":\"header_headerWrapper__1rzUj\",\"logo\":\"header_logo__1xPf6\",\"logoImage\":\"header_logoImage__2fRBo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footerCopy\":\"footer_footerCopy__1rj_s\",\"creator\":\"footer_creator__18kBz\",\"attribution\":\"footer_attribution__2CwSB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"layout_layout__2VB0u\",\"layoutContent\":\"layout_layoutContent__2LtOd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"map-layer_popup__19KZ8\",\"popupClose\":\"map-layer_popupClose__2symH\"};","import { useState } from 'react';\n\nfunction useLocalStorage(key, initialValue) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage;\n","import styles from './header.module.css';\n\nconst Header = () => {\n  return (\n    <header className={styles.header}>\n      <div className=\"container\">\n        <div className={styles.headerWrapper}>\n          <a href={process.env.PUBLIC_URL} className={styles.logo}>\n            <img\n              src={`${process.env.PUBLIC_URL}/images/logo.png`}\n              alt=\"\"\n              className={styles.logoImage}\n              width=\"32\"\n              height=\"32\"\n            />\n            <span className=\"font-heading\">Egelados</span>\n          </a>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import styles from './footer.module.css';\n\nconst Footer = () => {\n  return (\n    <footer>\n      <div className={`${styles.footerCopy} container`}>\n        <p className={styles.creator}>\n          Made by Dimi -{' '}\n          <a\n            href=\"https://github.com/takaras/egelados\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Project code (Github)\n          </a>\n        </p>\n        <p className={styles.attribution}>\n          Icons made by{' '}\n          <a\n            href=\"https://www.freepik.com\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Freepik\n          </a>{' '}\n          from{' '}\n          <a\n            href=\"https://www.flaticon.com/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            www.flaticon.com\n          </a>\n        </p>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import Header from './header';\nimport Footer from './footer';\n\nimport styles from './layout.module.css';\n\nconst Layout = ({ children }) => {\n  return (\n    <div className={styles.layout}>\n      <Header />\n      <main className={styles.layoutContent}>{children}</main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Layout;\n","import { useState } from 'react';\nimport { Feature, Layer, Popup } from 'react-mapbox-gl';\n\nimport styles from './map-layer.module.css';\n\nconst MapLayer = ({ features }) => {\n  const [popup, setPopup] = useState(false);\n\n  const openPopup = (feature, e) => {\n    e.originalEvent.preventDefault();\n    setPopup(feature);\n  };\n\n  const removePopup = (e) => {\n    if (!e?.originalEvent?.defaultPrevented) {\n      setPopup(false);\n    }\n  };\n\n  // Docu: https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/\n  // Example: https://docs.mapbox.com/mapbox-gl-js/example/visualize-population-density/\n  const featureCircleStyles = {\n    'circle-color': [\n      'interpolate',\n      ['linear'],\n      ['*', ['get', 'mag'], 1000],\n      1000,\n      '#FFBA08',\n      2000,\n      '#F48C06',\n      3000,\n      '#E85D04',\n      4000,\n      '#DC2F02',\n      5000,\n      '#D00000',\n      6000,\n      '#9D0208',\n      7000,\n      '#6A040F',\n      8000,\n      '#370617',\n    ],\n    'circle-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      1,\n      ['*', ['ceil', ['get', 'mag']], 1.5],\n      4,\n      ['*', ['ceil', ['get', 'mag']], 3],\n      8,\n      8,\n    ],\n  };\n\n  return (\n    <>\n      <Layer type=\"circle\" paint={featureCircleStyles}>\n        {features.map((feature) => {\n          return (\n            <Feature\n              key={feature.id}\n              coordinates={feature.geometry.coordinates}\n              properties={feature.properties}\n              onClick={(e) => openPopup(feature, e)}\n            />\n          );\n        })}\n      </Layer>\n      {popup && (\n        <Popup\n          key={`popup${popup.id}`}\n          coordinates={popup.geometry.coordinates}\n          className={styles.popup}\n        >\n          <div>{popup.properties.place}</div>\n          <div>Magnitude: {popup.properties.mag}</div>\n          <div>\n            <a\n              href={popup.properties.url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              More info\n            </a>\n          </div>\n          <button\n            type=\"button\"\n            className={`${styles.popupClose} no-btn`}\n            onClick={(e) => removePopup(e)}\n          >\n            <span className=\"visually-hidden\">Close popup</span>\n          </button>\n        </Popup>\n      )}\n    </>\n  );\n};\n\nexport default MapLayer;\n","import ReactMapboxGl, { RotationControl, ZoomControl } from 'react-mapbox-gl';\nimport MapLayer from '../map-layer/map-layer';\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './mapbox.css';\n\nconst Map = ReactMapboxGl({\n  minZoom: 0,\n  maxZoom: 15,\n  accessToken:\n    'pk.eyJ1IjoidGFrYXJhcyIsImEiOiJja3Vtemdlemwwb2J4MnV0aHdkNXZpbm1jIn0.agG7_Nx_UOSrcg_wIotFHQ',\n});\n\nconst MapContainer = ({ features }) => {\n  const mapConfig = {\n    zoom: [1],\n    center: [13.404954, 52.520008],\n  };\n\n  return (\n    <div className=\"map\">\n      <Map\n        style={`mapbox://styles/takaras/ckulabfkletrm17o4wpio0z28`}\n        zoom={mapConfig.zoom}\n        center={mapConfig.center}\n        containerStyle={{\n          height: '68vh',\n          width: '100%',\n        }}\n      >\n        <ZoomControl />\n        <RotationControl />\n        <MapLayer features={features} />\n      </Map>\n    </div>\n  );\n};\n\nexport default MapContainer;\n","import styles from './map-controls.module.css';\n\nconst MapControls = ({ active, changeTimespan }) => {\n  return (\n    <div className=\"mapControls\">\n      <button\n        type=\"button\"\n        className={`${styles.button} btn ${\n          active === 'all_hour' ? styles.active : ''\n        }`}\n        onClick={() => changeTimespan('all_hour')}\n      >\n        past hour\n      </button>\n      <button\n        type=\"button\"\n        className={`${styles.button} btn ${\n          active === 'all_day' ? styles.active : ''\n        }`}\n        onClick={() => changeTimespan('all_day')}\n      >\n        past day\n      </button>\n      <button\n        type=\"button\"\n        className={`${styles.button} btn ${\n          active === 'all_week' ? styles.active : ''\n        }`}\n        onClick={() => changeTimespan('all_week')}\n      >\n        past week\n      </button>\n      <button\n        type=\"button\"\n        className={`${styles.button} btn ${\n          active === 'all_month' ? styles.active : ''\n        }`}\n        onClick={() => changeTimespan('all_month')}\n      >\n        past month\n      </button>\n    </div>\n  );\n};\n\nexport default MapControls;\n","import './map-loader.css';\n\n// https://loading.io/css/\nconst MapLoader = () => {\n  return (\n    <div className=\"mapLoader\">\n      <div className=\"lds-spinner\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  );\n};\n\nexport default MapLoader;\n","import { useEffect, useState } from 'react';\n\nimport useLocalStorage from './hooks/useLocalStorage';\n\nimport Layout from './components/layout/layout';\nimport MapContainer from './components/map-container/map-container';\nimport MapControls from './components/map-controls/map-controls';\nimport MapLoader from './components/map-loader/map-loader';\n\nconst App = () => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [timespan, setTimespan] = useLocalStorage('timespan', 'all_hour');\n  const [countEarthquakes, setCountEarthquakes] = useState(0);\n  const [features, setFeatures] = useState([]);\n\n  useEffect(() => {\n    setIsLoading(true);\n    const url = `https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/${timespan}.geojson`;\n    fetch(url)\n      .then((response) => response.json())\n      .then((data) => {\n        setIsLoading(false);\n        if (data.metadata.status !== 200) {\n          setError(true);\n          return;\n        }\n\n        setFeatures(data.features);\n        setCountEarthquakes(data.metadata.count);\n      })\n      .catch((e) => {\n        setError(true);\n        setIsLoading(false);\n      });\n  }, [timespan]);\n\n  if (error) {\n    return (\n      <Layout>\n        <p>The data are currently not available.</p>\n        <p>\n          Please <a href={process.env.PUBLIC_URL}>try again</a>.\n        </p>\n      </Layout>\n    );\n  }\n\n  let timespanText;\n  switch (timespan) {\n    case 'all_day':\n      timespanText = '24 hours';\n      break;\n    case 'all_week':\n      timespanText = '7 days';\n      break;\n    case 'all_month':\n      timespanText = '30 days';\n      break;\n    default:\n      timespanText = 'hour';\n      break;\n  }\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        {isLoading ? (\n          <MapLoader />\n        ) : (\n          <>\n            <p style={{ marginBottom: '0.8rem' }}>\n              {countEarthquakes > 0 ? countEarthquakes : 'No'} earthquakes in\n              the past {timespanText}\n            </p>\n            <MapContainer features={features} />\n          </>\n        )}\n        <MapControls active={timespan} changeTimespan={setTimespan} />\n      </div>\n    </Layout>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}